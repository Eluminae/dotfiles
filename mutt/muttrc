source "~/.mutt/vim-keys.rc"
source "~/.mutt/base16-theme"

# IMAP: offlineimap
set folder = "~/.mails"
source ~/.mutt/mailboxes

set sendmail="/usr/bin/msmtp"
set use_from=yes
set realname="Eddie Barraco"
set envelope_from=yes
set sort=threads
set edit_headers=yes

# Khard integration
set query_command= "khard email --parsable %s"
bind editor <Tab> complete-query
bind editor ^T    complete
set query_command = "echo %s | xargs khard email --parsable --"
macro index,pager A \
    "<pipe-message>khard add-email<return>" \
    "add the sender email address to khard"

auto_view text/html
alternative_order text/plain text/enriched text/html
macro index \co |urlscan\n
macro pager \co |urlscan\n

source ~/.mutt/accounts/{{@@ mutt_default_context @@}}

folder-hook contact_personal/* source ~/.mutt/accounts/contact_personal
folder-hook contact_stacyharper/* source ~/.mutt/accounts/contact_stacyharper
folder-hook contact_misterbanal/* source ~/.mutt/accounts/contact_misterbanal
folder-hook ubitransport/* source ~/.mutt/accounts/ubitransport

set virtual_spoolfile=yes
set folder={{@@ env['HOME'] @@}}/.mails
source ~/.mutt/notmuch-mailboxes
macro index A "<modify-labels>+archive -unread -inbox\\n" "Archive message"
macro index c "<change-vfolder>?" "Change to vfolder overview"
macro index \\\\ "<vfolder-from-query>" "Search mailbox"
