#!/bin/sh

mkdir ~/.notmuch-postsync >> /dev/null
if [ $? -ne 0 ]
then
	notify-send -u critical 'Notmuch post sync hook semaphore already taken'
	exit 1
fi

notmuch new
notmuch tag +inbox -- tag:uncategorized

notmuch tag -inbox +sent -- "tag:uncategorized and (from:contact@eddiebarraco.fr or from:contact@stacyharper.net or from:contact@misterbanal.net or from:e.barraco@ubitransport.com)"
notmuch tag +newsletters -- "tag:uncategorized and (from:newsletter@example.org or subject:'newsletter*')"
notmuch tag -inbox +technique -- "tag:uncategorized and (to:technique@ubitransport.com or to:technique@ubitransports.com)"

notmuch tag -uncategorized -- tag:uncategorized

rmdir ~/.notmuch-postsync
